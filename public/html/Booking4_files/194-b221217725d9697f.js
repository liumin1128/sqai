(self.webpackJsonpManageBooking=self.webpackJsonpManageBooking||[]).push([[194],{26914:function(e,n,a){"use strict";a.d(n,{A:function(){return l}});var i=a(14144),r=a.n(i),t=a(94184),o=a.n(t),d=a(85893);function l(e){var n=e.selected?r().flightsOdActive:r().flightsOdInactive,a=e.onClick,i=e.flightIndex,t=e.origin,l=e.destination,c=e.segmentId,s=e.setSegmentId;return(0,d.jsx)("span",{className:o()(n,e.selected?"flightsOdActive":"flightsOdInactive"),onClick:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){s&&s(null!==c&&void 0!==c?c:0),a(i,e)})),children:t?"".concat(t," - ").concat(l):l})}},34634:function(e,n,a){"use strict";a.d(n,{P:function(){return ve}});a(10581);var i,r=a(67294),t=a(19226),o=a.n(t),d=a(94184),l=a.n(d),c=a(56550),s=a.n(c),u=a(91989),m=a.n(u),p=a(85893),f=new Map([["FF4",m().fareFamilyEconomyLite],["FF2",m().fareFamilyEconomyFlexi],["FF3",m().fareFamilyEconomyStandard],["FF5",m().fareFamilyEconomySaver],["FF13",m().fareFamilyPremiumLite],["FF0",m().fareFamilyPremiumFlexi],["FF1",m().fareFamilyPremiumStandard],["FF8",m().fareFamilyBusinessLite],["FF6",m().fareFamilyBusinessFlexi],["FF7",m().fareFamilyBusinessStandard],["FF9",m().fareFamilyFirst]]),C=function(e){var n=e.originCityName,a=e.destinationCityName,i=e.fareFamilyName,r=e.fareFamilyCode,t=e.isMergedColumn;return(0,p.jsx)("div",{className:l()(t?m().fareConditionSummaryTableColumnFlex2:m().fareConditionSummaryTableColumnFlex1,m().fareConditionSummaryTableColumnHead,f.get(r),"fareConditionSummaryTableColumnHead"),children:(0,p.jsxs)("div",{children:[n||a?(0,p.jsxs)("div",{className:l()(m().cityNameText,"cityNameText"),children:[n," - ",a]}):null,(0,p.jsx)("div",{className:l()(m().fareFamilyTypeText,"fareFamilyTypeText"),children:null===i||void 0===i?void 0:i.toLocaleUpperCase()})]})})},_=a(56068),h=a.n(_),x=a(74061),v=a.n(x),g=function(e){var n=e.icon,a=new Map([["baggage",v().baggage],["bookingChange",v().bookingChange],["cancellation",v().cancellation],["earnKrisflyerMiles",v().earnKrisflyerMiles],["noShow",v().noShow],["seatSelection",v().seatSelection],["upgradeWithMiles",v().upgradeWithMiles]]);return(0,p.jsx)("div",{className:l()(a.get(n),v().icon,"icon")})},F=function(e){var n=e.name,a=e.icon;return(0,p.jsxs)("div",{className:l()(h().label,"label"),children:[(0,p.jsx)(g,{icon:a}),(0,p.jsx)("div",{className:l()(h().labelText,"labelText"),children:n})]})},y=function(e){var n=e.name,a=e.icon;return(0,p.jsxs)("div",{className:l()(h().mobileLabel,"mobileLabel"),children:[(0,p.jsx)(g,{icon:a}),(0,p.jsxs)("div",{className:l()(h().labelText,"labelText"),children:[n," : "]})]})},T=a(29006),N=a.n(T),b=new Map([["not allowed",N().notAllowedText],["complementary",N().complementarySeatText],["normal",N().normal]]),k=function(e){var n,a=e.value,i=e.isMergedColumn;return(0,p.jsx)("div",{className:l()(i?N().fareConditionSummaryTableColumnFlex2:N().fareConditionSummaryTableColumnFlex1,N().contentBorder,N().fareConditionLabel,b.get((n=a,n.toLocaleLowerCase().includes("not allowed")?"not allowed":n.toLocaleLowerCase().includes("complimentary")?"complementary":"normal")),"fareConditionLabel"),children:a})},j=function(e){var n=e.fareCondition,a=e.translations,i=[{name:a["farecondition.checkinBagage"],id:"baggage",greyBackground:!1,icon:"baggage"},{name:a["farecondition.advSeatSelection"],id:"seatSelection",greyBackground:!1,icon:"seatSelection"},{name:a["farecondition.miles"],id:"earnKrisflyerMiles",greyBackground:!1,icon:"earnKrisflyerMiles"},{name:a["farecondition.upWithMiles"],id:"upgradeWithMiles",greyBackground:!1,icon:"upgradeWithMiles"},{name:a["farecondition.Cancelation"],id:"cancellation",greyBackground:!0,icon:"cancellation"},{name:a["farecondition.bookingchange"],id:"bookingChange",greyBackground:!0,icon:"bookingChange"},{name:a["farecondition.noShow"],id:"noShow",greyBackground:!0,icon:"noShow"}];return(0,p.jsxs)("div",{className:l()(s().fareTypeTableWrapper,"fareTypeTableWrapper"),children:[(0,p.jsxs)("div",{className:l()(s().headColoumn,"headColoumn"),children:[(0,p.jsx)("div",{className:l()(s().fareConditionSummaryPopupTableColumn,"fareConditionSummaryPopupTableColumn"),children:a["farecondition.title"]}),i.map((function(e){var n=e.icon,a=e.greyBackground,i=e.name,r=e.id;return(0,p.jsx)("div",{className:l()(s().fareConditionSummaryPopupTableRow,a?s().greyBackground:"","fareConditionSummaryPopupTableRow"),children:(0,p.jsx)(F,{name:i,icon:n})},r)}))]}),n.map((function(e){var n=e.fareFamilyCode,a=e.fareFamilyName,r=e.originCityName,t=e.destinationCityName;return(0,p.jsx)("div",{className:l()(s().dataColumn,"dataColumn"),children:i.map((function(i,o){var d=i.icon,c=i.greyBackground,u=i.name,m=e[i.id];return 0===o?(0,p.jsxs)("div",{children:[(0,p.jsx)(C,{originCityName:r,destinationCityName:t,fareFamilyCode:n,fareFamilyName:a,isMergedColumn:!0},o),(0,p.jsxs)("div",{className:l()(s().fareConditionSummaryPopupTableRow,c?s().greyBackground:"","fareConditionSummaryPopupTableRow"),children:[(0,p.jsx)(y,{name:u,icon:d}),(0,p.jsx)(k,{value:m,isMergedColumn:!0})]})]}):(0,p.jsxs)("div",{className:l()(s().fareConditionSummaryPopupTableRow,c?s().greyBackground:"","fareConditionSummaryPopupTableRow"),children:[(0,p.jsx)(y,{name:u,icon:d}),(0,p.jsx)(k,{value:m,isMergedColumn:!0},o)]},i.id)}))},"")}))]})},w=a(94039),S=a.n(w),A=a(3985),I=function(e){var n,a=(0,r.useContext)(A.dd),i=e.viewFullFareCondition,t=e.fareCondition;return(0,p.jsxs)("div",{className:l()(E.get((n=t,n.length>1?"two-way":"one-way")),"oneWay"),children:[(0,p.jsx)("div",{className:l()(S().head,"head"),children:a["farecondition.yourFarecondition"]}),(0,p.jsx)("div",{className:l()(S().description,"description"),children:a["farecondition.description"]}),(0,p.jsx)(j,{fareCondition:t,translations:a}),(0,p.jsx)("div",{className:l()(S().link,"link"),onClick:i,children:a["farecondition.viewFull"]})]})},E=new Map([["one-way",S().oneWay],["two-way",S().returnFlight],["mtc",S().mtc]]),R=a(26914),B=a(7044),L=a.n(B),P=a(12285),H=a.n(P),D=function(e){var n=e.fareConditionKeysArray,a=e.fareConditionValue;return(0,p.jsx)("div",{className:l()(H().wrapper,"wrapper"),children:n.map((function(e){var n=e.id,i=e.name,r=a[n];return(0,p.jsx)(O,{label:i,data:r},n)}))})},O=function(e){var n=e.label,a=e.data,i=a.value,r=a.description;return(0,p.jsxs)("div",{className:l()(H().fareConditionItem,"fareConditionItem"),children:[(0,p.jsx)("div",{className:l()(H().label,"label"),children:n}),(0,p.jsxs)("div",{className:l()(H().value,"value"),children:[(0,p.jsx)("div",{children:i}),(0,p.jsx)("div",{children:r})]})]})},M=function(e){var n=(0,r.useContext)(A.dd),a=(0,r.useState)(0),i=a[0],t=a[1],o=function(e){t(e)},d=e.viewCompareFareType,c=e.formattedFullFareConditionData,s=[{name:n["fullFareCondition.fareType"],id:"fareType"},{name:n["fullFareCondition.fareBasisCode"],id:"fareBasisCode"},{name:n["fullFareCondition.maximumStay"],id:"maximumStay"},{name:n["fullFareCondition.minimumStay"],id:"minimumStay"},{name:n["fullFareCondition.itineraryChange"],id:"itineraryChange"},{name:n["fullFareCondition.cancellation.refund"],id:"cancellation"},{name:n["fullFareCondition.noShowFee"],id:"noShowFee"},{name:n["fullFareCondition.sequence"],id:"sequence"},{name:n["fullFareCondition.mileage"],id:"mileageAccural"},{name:n["fullFareCondition.upgradeAwards"],id:"upgradeAwards"},{name:n["fullFareCondition.krysFlyerMiles"],id:"krisflyerMiles"},{name:n["fullFareCondition.advancePurchase"],id:"advancePurchase"},{name:n["fullFareCondition.applicability"],id:"applicability"},{name:n["fullFareCondition.restrictions"],id:"ticketRestrictions"},{name:n["fullFareCondition.travelRestrictions"],id:"travelRestrictions"},{name:n["fullFareCondition.blackoutDates"],id:"blackoutDates"},{name:n["fullFareCondition.salesRestrictions"],id:"salesRestrictions"},{name:n["fullFareCondition.seasonality"],id:"seasonality"},{name:n["fullFareCondition.ticketEndorsement"],id:"ticketEndorsement"},{name:n["fullFareCondition.fees"],id:"fees"},{name:n["fullFareCondition.aditionalConditions"],id:"additionalConditions"}];return(0,p.jsxs)("div",{className:l()(L().wrapper,"wrapper"),children:[(0,p.jsxs)("div",{className:l()(L().backButton,"backButton"),onClick:d,children:[(0,p.jsx)("div",{className:l()(L().backArrowIcon,"backArrowIcon")}),(0,p.jsx)("div",{className:l()(L().backButtonText,"backButtonText"),children:"BACK"})]}),(0,p.jsxs)("div",{className:l()(L().head,"head"),children:[n["farecondition.fullfare.heading"]," "]}),(0,p.jsx)("div",{children:c.map((function(e,n){return(0,p.jsx)(R.A,{onClick:o,selected:i===n,flightIndex:n,origin:e.originCityName,destination:e.destinationCityName},n)}))}),(0,p.jsx)(D,{fareConditionKeysArray:s,fareConditionValue:c[i]})]})},W=a(67396);!function(e){e.CompareFareType="COMPARE_FARE_TYPE",e.FullFareCondition="FULL_FARE_CONDITION"}(i||(i={}));var U=function(e){var n=e.show,a=e.togglePopup,t=e.fareCondition,o=e.formattedFullFareConditionData,d=(0,r.useState)(i.CompareFareType),l=d[0],c=d[1];return(0,r.useEffect)((function(){c(i.CompareFareType)}),[n]),l===i.CompareFareType?n?(0,p.jsx)(W.H,{onClickClose:a,children:(0,p.jsx)(I,{fareCondition:t,viewFullFareCondition:function(){c(i.FullFareCondition)}})}):null:n?(0,p.jsx)(W.H,{onClickClose:a,width:"660px",children:(0,p.jsx)(M,{formattedFullFareConditionData:o,viewCompareFareType:function(){c(i.CompareFareType)}})}):null},K=a(50029),G=a(87794),V=a.n(G),J=(a(11541),a(48692)),q=a.n(J),z=a(26974),Y=a(345),X=a(36808),Z=a.n(X),Q=function(){var e=(0,K.Z)(V().mark((function e(n,a,i,r,t){var o,d,l,c;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null!==(o=t)&&void 0!==o&&o,"/managebooking/api/ticketsandreceipts",d={method:"POST",headers:{"Content-Type":"application/json","csrf-token":Z().get("MBVS_CSRF")||""},body:JSON.stringify({flowType:t?"MYSQUPGRADE":"MB_HOTEL",receiptNumber:n,pnr:a,upgradeDetails:i,isNativeUpgrade:t,locale:r})},e.next=6,fetch("/managebooking/api/ticketsandreceipts",d);case 6:return l=e.sent,e.next=9,l.json();case 9:(c=e.sent).data?$(c.data):console.log("Error occured while creating the pdf"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("Unknown exception creating the pdf");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n,a,i,r,t){return e.apply(this,arguments)}}(),$=function(e){var n=ee(e),a=window.navigator;if(a&&a.msSaveOrOpenBlob)a.msSaveOrOpenBlob(n,"receipt.pdf");else{var i=URL.createObjectURL(n);window.open(i)}},ee=function(e){for(var n=1024,a=window.atob(e),i=a.length,r=Math.ceil(i/n),t=new Array(r),o=0;o<r;++o){for(var d=o*n,l=Math.min(d+n,i),c=new Array(l-d),s=d,u=0;s<l;++u,++s)c[u]=a[s].charCodeAt(0);t[o]=new Uint8Array(c)}return new Blob(t,{type:"application/pdf"})},ne=a(53077),ae=function(e){var n,a=e.onClickClose,i=e.ticketsAndReceiptsData,t=e.redirectToSubflow,o=e.pnr,d=e.isFlightCreditPnr,c=(0,r.useContext)(A.dd),s=(0,r.useContext)(A.ko),u=s.setPageLoading,m=s.locale,f=i.tripAddons?i.tripAddons:[],C=null!==(n=i.residualEMD)&&void 0!==n?n:[],_=i.flights?i.flights:[],h=i.seats?i.seats:[],x=i.additionalBaggages?i.additionalBaggages:[],v=i.addOnDeals?i.addOnDeals:[],g=0!==C.length&&null!==d&&void 0!==d&&d,F=i.upgradeDetails?i.upgradeDetails:[],y=r.useContext(A.Jj)["feature.nativeUpgrade.receipts.switch"],T=function(){var e=(0,K.Z)(V().mark((function e(){var n,a,i,r,d,l,c,s,p,C,_,h,x,v,g,y,T,N;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=f.filter((function(e){return"hotel"===e.id&&e.isMor})),a=n.map((function(e){return null===e||void 0===e?void 0:e.refNo})),i=[],u(!0),r=0;r<a.length;r++)(d=a[r])&&i.push(Q(d,o));return e.next=7,Promise.all(i);case 7:if(!(F.length>0)){e.next=14;break}for(p=[],C=null!==(l=null===(c=F[0])||void 0===c||null===(s=c.data[0])||void 0===s?void 0:s.refNo)&&void 0!==l?l:"0",_=0;_<F.length;_++){for(h=[],x=0;x<F[_].data.length;x++)y=null!==(v=F[_])&&void 0!==v&&null!==(g=v.data[x])&&void 0!==g&&g.segmentId?F[_].data[x].segmentId.toString():"0",h.push(y);T={travellerID:F[_].paxId,flightSegmentIds:h},p.push(T)}return N={travellerDetails:p},e.next=14,Q(C,o,N,m,!0);case 14:t(),u(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)(z.q,{onClickClose:a,childrenWrapperWidth:420,classes:{modalWrapper:q().childrenWrapper},children:[(0,p.jsxs)("div",{className:l()(q().wrapper,"wrapper"),"data-testid":"ticketAndReceiptPopup",children:[(0,p.jsx)("div",{className:l()(q().heading,"heading"),children:c.ticketAndReceipts}),0!==_.length&&(0,p.jsx)(re,{data:_,redirectToSubflow:t,showFCReciepts:!1}),0!==_.length&&g&&(0,p.jsx)(re,{data:_,redirectToSubflow:t,showFCReciepts:g}),0!==v.length&&(0,p.jsx)(oe,{data:v,redirectToSubflow:t}),0!==h.length&&(0,p.jsx)(le,{data:h,redirectToSubflow:t}),0!==x.length&&(0,p.jsx)(se,{data:x,redirectToSubflow:t}),0!==f.length&&(0,p.jsx)(me,{data:f,redirectToSubflow:t,pnr:o}),0!==F.length&&y&&(0,p.jsx)(pe,{data:F,pnr:o})]}),(0,p.jsx)("div",{className:l()(q().submitButtonContainer,"submitButtonContainer"),children:(0,p.jsx)(Y.P,{disabled:!1,classes:{root:q().submitButton},onClick:T,children:c.viewAll})})]})},ie=function(e){var n=(0,r.useContext)(A.dd),a=e.redirectToSubflow,i=e.showFCReciepts,t=e.cardData,o=t.paxName,d=t.eTicketNum,c=t.lastName,s=t.paxId,u=t.firstName,m=t.receiptNo;return(0,p.jsxs)("div",{className:l()(q().cardContent,"cardContent"),children:[(0,p.jsx)("div",{className:l()(q().cardHead,"cardHead"),children:o}),(0,p.jsxs)("div",{className:l()(q().inline,"inline"),children:[i?(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:"".concat(n.receiptNo,":")})," ",(0,p.jsx)("span",{children:m})]}):(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:"".concat(n.eTicket,":")})," ",(0,p.jsx)("span",{children:d})]}),(0,p.jsx)("div",{onClick:function(){return i?a(c,m,u,s,ne.U.EMD_RECEIPT):a(c,d,u,s,ne.U.FLIGHT)},className:l()(q().viewLink,"viewLink"),children:n.view})]})]})},re=function(e){var n=(0,r.useContext)(A.dd),a=e.data,i=e.redirectToSubflow,t=e.showFCReciepts;return(0,p.jsxs)("div",{className:l()(q().containerWrapper,"containerWrapper"),children:[t?(0,p.jsx)("div",{className:l()(q().cardContainerHead,"cardContainerHead"),children:n.flightCredits}):(0,p.jsx)("div",{className:l()(q().cardContainerHead,"cardContainerHead"),children:n.flights}),(0,p.jsx)("div",{className:l()(q().cardContainer,"cardContainer"),children:a.map((function(e){return t?e.receiptNo&&(0,p.jsx)(ie,{cardData:e,redirectToSubflow:i,showFCReciepts:t},e.eTicketNum):(0,p.jsx)(ie,{cardData:e,redirectToSubflow:i,showFCReciepts:t},e.eTicketNum)}))})]})},te=function(e){var n=(0,r.useContext)(A.dd),a=e.redirectToSubflow,i=e.cardData,t=i.paxName,o=i.data,d=i.firstName,c=i.lastName,s=i.paxId;return(0,p.jsxs)("div",{className:l()(q().cardContent,"cardContent"),children:[(0,p.jsx)("div",{className:l()(q().cardHead,"cardHead"),children:t}),o.map((function(e){var i=e.segmentName,r=e.refNo;return(0,p.jsxs)("div",{className:l()(q().inline,"inline"),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:l()(q().cardItem,"cardItem"),children:i}),(0,p.jsx)("span",{children:"".concat(n.refNo,":")})," ",(0,p.jsx)("span",{children:r})]}),(0,p.jsx)("div",{onClick:function(){a(c,r,d,s,ne.U.EB_RECEIPT)},className:l()(q().viewLink,"viewLink"),children:n.view})]},e.segmentName)}))]})},oe=function(e){var n=(0,r.useContext)(A.dd),a=e.data,i=e.redirectToSubflow;return(0,p.jsxs)("div",{className:l()(q().containerWrapper,"containerWrapper"),children:[(0,p.jsx)("div",{className:l()(q().cardContainerHead,"cardContainerHead"),children:n.addonDeals}),(0,p.jsx)("div",{className:l()(q().cardContainer,"cardContainer"),children:a.map((function(e){return(0,p.jsx)(te,{cardData:e,redirectToSubflow:i},e.paxName)}))})]})},de=function(e){var n=(0,r.useContext)(A.dd),a=e.redirectToSubflow,i=e.cardData,t=i.paxName,o=i.data,d=i.lastName,c=i.firstName,s=i.paxId;return(0,p.jsxs)("div",{className:l()(q().cardContent,"cardContent"),children:[(0,p.jsx)("div",{className:l()(q().cardHead,"cardHead"),children:t}),o.map((function(e){var i=e.segmentName,r=e.refNo;return(0,p.jsxs)("div",{className:l()(q().inline,"inline"),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:l()(q().cardItem,"cardItem"),children:i}),(0,p.jsx)("span",{children:"".concat(n.refNo,":")})," ",(0,p.jsx)("span",{children:r})]}),(0,p.jsx)("div",{onClick:function(){a(d,r,c,s,ne.U.PSS_RECEIPT)},className:l()(q().viewLink,"viewLink"),children:n.view})]},e.segmentName)}))]})},le=function(e){var n=(0,r.useContext)(A.dd),a=e.data,i=e.redirectToSubflow;return(0,p.jsxs)("div",{className:l()(q().containerWrapper,"containerWrapper"),children:[(0,p.jsx)("div",{className:l()(q().cardContainerHead,"cardContainerHead"),children:n.seats}),(0,p.jsx)("div",{className:l()(q().cardContainer,"cardContainer"),children:a.map((function(e){return(0,p.jsx)(de,{cardData:e,redirectToSubflow:i},e.paxName)}))})]})},ce=function(e){var n=(0,r.useContext)(A.dd),a=e.redirectToSubflow,i=e.cardData,t=i.paxName,o=i.data,d=i.paxlastName,c=i.firstName,s=i.paxId;return(0,p.jsxs)("div",{className:l()(q().cardContent,"cardContent"),children:[(0,p.jsx)("div",{className:l()(q().cardHead,"cardHead"),children:t}),o.map((function(e){var i=e.segmentName,r=e.refNo;return(0,p.jsxs)("div",{className:l()(q().inline,"inline"),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:l()(q().cardItem,"cardItem"),children:i}),(0,p.jsx)("span",{children:"".concat(n.refNo,":")})," ",(0,p.jsx)("span",{children:r})]}),(0,p.jsx)("div",{onClick:function(){a(d,r,c,s,ne.U.EB_RECEIPT)},className:l()(q().viewLink,"viewLink"),children:n.view})]},e.segmentName)}))]})},se=function(e){var n=(0,r.useContext)(A.dd),a=e.data,i=e.redirectToSubflow;return(0,p.jsxs)("div",{className:l()(q().containerWrapper,"containerWrapper"),children:[(0,p.jsx)("div",{className:l()(q().cardContainerHead,"cardContainerHead"),children:n.additionalBaggage}),(0,p.jsx)("div",{className:l()(q().cardContainer,"cardContainer"),children:a.map((function(e){return(0,p.jsx)(ce,{cardData:e,redirectToSubflow:i},e.paxName)}))})]})},ue=function(e){var n=(0,r.useContext)(A.dd),a=e.redirectToSubflow,i=e.lastName,t=e.paxId,o=e.firstName,d=e.pnr,c=e.cardData,s=c.refNo,u=c.isMor,m=c.addonItem,f=(0,r.useContext)(A.ko).setPageLoading,C=function(){var e=(0,K.Z)(V().mark((function e(){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u||!s){e.next=7;break}return f(!0),e.next=4,Q(s,d);case 4:f(!1),e.next=8;break;case 7:a(i,s,o,t,m);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:l()(q().cardContent,"cardContent"),children:[(0,p.jsx)("div",{className:l()(q().cardHead,"cardHead"),children:m}),(0,p.jsxs)("div",{className:l()(q().inline,"inline"),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:"".concat(n.refNo,":")})," ",(0,p.jsx)("span",{children:s})]}),(0,p.jsx)("div",{onClick:C,className:l()(q().viewLink,"viewLink"),children:n.view})]})]})},me=function(e){var n=(0,r.useContext)(A.dd),a=e.data,i=e.redirectToSubflow,t=e.pnr;return(0,p.jsxs)("div",{className:l()(q().containerWrapper,"containerWrapper"),children:[(0,p.jsx)("div",{className:l()(q().cardContainerHead,"cardContainerHead"),children:n.tripAddons}),(0,p.jsx)("div",{className:l()(q().cardContainer,"cardContainer"),children:a.map((function(e){return(0,p.jsx)(ue,{cardData:e,redirectToSubflow:i,pnr:t},e.refNo)}))})]})},pe=function(e){var n=(0,r.useContext)(A.dd),a=e.data,i=e.pnr,t=r.useContext(A.ko).locale,o=(0,r.useContext)(A.ko).setPageLoading,d=function(){var e=(0,K.Z)(V().mark((function e(n){var r,d,l,c,s,u,m,p,f,C,_,h,x,v;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(!0),!(a&&a.length>0)){e.next=8;break}for(r=[],d=n,l=0;l<a.length;l++){for(c=[],s=0;s<(null===(u=a[l])||void 0===u?void 0:u.data.length);s++)a[l].data[s].refNo==n&&(C=(null!==(m=null===(p=a[l])||void 0===p||null===(f=p.data[s])||void 0===f?void 0:f.segmentId)&&void 0!==m?m:0).toString(),c.push(C));c&&c.length>0&&(x={travellerID:null!==(_=null===(h=a[l])||void 0===h?void 0:h.paxId)&&void 0!==_?_:"",flightSegmentIds:c},r.push(x))}return v={travellerDetails:r},e.next=8,Q(d,i,v,t,!0);case 8:o(!1);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:l()(q().containerWrapper,"containerWrapper"),children:[(0,p.jsx)("div",{className:l()(q().cardContainerHead,"cardContainerHead"),children:n.upgradeDetails}),(0,p.jsx)("div",{className:l()(q().cardContainer,"cardContainer"),children:a.map((function(e){return(0,p.jsx)(fe,{cardData:e,pnr:i,viewUpgrade:d},e.paxName)}))})]})},fe=function(e){var n=(0,r.useContext)(A.dd),a=e.viewUpgrade,i=e.cardData,t=i.paxName,o=i.data;return(0,p.jsxs)("div",{className:l()(q().cardContent,"cardContent"),children:[(0,p.jsx)("div",{className:l()(q().cardHead,"cardHead"),children:t}),o.map((function(e){var i=e.segmentName,r=e.refNo,t=e.segmentId;return(0,p.jsxs)("div",{className:l()(q().inline,"inline"),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:l()(q().cardItem,"cardItem"),children:i}),(0,p.jsx)("span",{children:"".concat(n.refNo,":")})," ",(0,p.jsx)("span",{children:r})]}),(0,p.jsx)("div",{onClick:function(){return a(null!==r&&void 0!==r?r:"",null!==t&&void 0!==t?t:0)},className:l()(q().viewLink,"viewLink"),children:n.view})]},e.segmentName)}))]})},Ce=a(10432),_e=a(68912),he=a(62099),xe=a(76457);function ve(e){var n=e.bookingReference,a=e.bookingReferenceHeading,i=e.disableViewTicketAndReceiptReason,t=e.hideViewTicketAndReceipt,d=e.ctaHeading,c=e.fareCondition,s=e.getFareConditionData,u=e.fareConditionRequest,m=e.fareConditionLink,f=e.getDocumentResponseReady,C=e.fareNotesConditionRequest,_=e.formattedFullFareConditionData,h=e.disableFareConditionReason,x=e.ticketsAndReceiptsData,v=e.lastName,g=e.isFlightCreditPnr,F=(0,_e.i)(),y=(0,r.useState)(!1),T=y[0],N=y[1],b=(0,r.useState)(!1),k=b[0],j=b[1],w=function(){s&&u&&C&&s(u,C)};r.useEffect((function(){c&&c.length>0&&N(!0)}),[N,c]);return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsxs)("div",{className:l()(o().wrapper,"wrapper"),children:[(0,p.jsxs)("div",{className:l()(o().booking,"booking"),children:[(0,p.jsx)("span",{className:l()(o().bookingIdentifierType,"bookingIdentifierType"),children:a}),(0,p.jsx)("span",{className:l()(o().bookingIdentifier,"bookingIdentifier"),children:n})]}),(!t||m)&&(0,p.jsxs)("div",{className:l()(o().cta,"cta"),children:[!t&&(0,p.jsx)(xe.Z,{type:"textRow",showLoadingAnimation:!0,ready:null===f||void 0===f||f,children:(0,p.jsx)("span",{className:l()(o().ctaLink,i&&o().ctaLinkDisabled,"ctaLink"),onClick:i?void 0:function(){j(!0)},"data-testid":"ticketAndReceiptLink",children:i?(0,p.jsx)(Ce.T,{position:F.width<768?"Bottom":"Top",message:i,children:d}):d})}),!t&&m&&(0,p.jsx)("div",{className:l()(o().divider,"divider")}),m&&(0,p.jsx)("div",{className:l()(o().ctaLink,"ctaLink"),onClick:h?void 0:function(){w()},"data-testid":"farecondition-link",children:(0,p.jsx)("span",{className:l()(h&&o().ctaLinkDisabled,"ctaLinkDisabled"),children:h?(0,p.jsx)(Ce.T,{position:F.width<768?"Bottom":"Top",message:h,children:m}):m})})]})]}),c&&(0,p.jsx)(U,{fareCondition:c,show:T,togglePopup:function(){N(!T)},formattedFullFareConditionData:_||[]}),k&&(0,p.jsx)(ae,{redirectToSubflow:function(e,a,i,r,t){(0,he.E)({pnr:n,lastName:null!==e&&void 0!==e?e:v,subFlow:ne.y.PRINT_TICKETS,ticketNumber:null!==a&&void 0!==a?a:"",trcptMbvs:null!==t&&void 0!==t?t:ne.U.PRINT_ALL,firstName:null!==i&&void 0!==i?i:"",paxId:null!==r&&void 0!==r?r:""},"/mbRedirectToSubFlow.form",!0)},onClickClose:function(){j(!1)},ticketsAndReceiptsData:null!==x&&void 0!==x?x:{},pnr:n,isFlightCreditPnr:g})]})}},922:function(e,n,a){"use strict";a.d(n,{X:function(){return l}});var i=a(62247),r=a.n(i),t=a(94184),o=a.n(t),d=a(85893);function l(e){var n=e.text,a=e.textType;return(0,d.jsx)("span",{className:"normal"==a?o()(r().normalHeading,"normalHeading"):o()(r().mainHeading,"mainHeading"),children:n})}},53077:function(e,n,a){"use strict";var i,r;a.d(n,{U:function(){return r},y:function(){return i}}),function(e){e.EXCESS_BAGGAGE="excessBagg",e.CHANGE_BOOKING="changeBookingNew",e.CANCEL_BOOKING="tcancelBookingCommercialEvent",e.UPDATE_PAX_DETAILS="updatePaxDetails",e.MEAL_SELECTION="MEAL",e.SEAT_SELECTION="selectSeat",e.INSURANCE="travelExtrasMBView",e.CHECK_SSH="checksshEligibility",e.AGODA_HOTEL="agodaHotel",e.RENTAL_CAR="rentalCar",e.CONFIRM_BOOKING="confirmAndPay",e.TTT_CONFIRMATION="confirmAndPay",e.SELECT_ALTERNATE_FLIGHT="confirmWLChangeFlight",e.CONFIRM_AND_PAY="confirmWLReview",e.CANCEL_SSH_BOOKING="cancelBookingCommercialEventSSH",e.PRINT_TICKETS="ticketsAndReceiptsEvent",e.CIB_SEAT_SELECTION="MB_SEAT",e.CANCEL_REDEMPTION_BOOKING="cancelRedemptionBooking",e.UPGRADE_FLIGHT="UpgradeFlight",e.CHANGE_OBB_FLIGHT="redemptionChangeEvent",e.CANCEL_REWARDS="cancelRewards",e.REDEEM_VOUCHER="RedeemVoucher",e.KF_SIGNUP="KFSignUp"}(i||(i={})),function(e){e.FLIGHT="Flight",e.EB_RECEIPT="Excess Baggage",e.PSS_RECEIPT="Preferred seat",e.EMD_RECEIPT="Residual EMD",e.PRINT_ALL="Print All"}(r||(r={}))},62099:function(e,n,a){"use strict";a.d(n,{E:function(){return i}});var i=function(e,n,a){var i,t=document.createElement("form");for(t.setAttribute("method","post"),t.setAttribute("action",n),a&&t.setAttribute("target","_blank");t.firstChild;)null===t||void 0===t||t.removeChild(t.firstChild);Array.prototype.forEach.call(Object.keys(e),(function(n){Array.isArray(e[n])?t.appendChild(r(n,JSON.stringify(e[n]))):t.appendChild(r(n,e[n]))})),document.documentElement.appendChild(t),t.submit(),null===(i=document.documentElement)||void 0===i||i.removeChild(t)},r=function(e,n){var a=document.createElement("input");return a.type="text",a.hidden=!0,a.name=e,a.value=n,a}},14144:function(e){e.exports={flightsOd:"FlightsOD_flightsOd__n48_z",flightsOdInactive:"FlightsOD_flightsOdInactive__vUKj4",flightsOdActive:"FlightsOD_flightsOdActive__n2Tou"}},48692:function(e){e.exports={childrenWrapper:"TicketAndReceiptPopup_childrenWrapper__6fXHs",wrapper:"TicketAndReceiptPopup_wrapper__DJJoA",heading:"TicketAndReceiptPopup_heading__CSt83",description:"TicketAndReceiptPopup_description__n61w6",firstNameInput:"TicketAndReceiptPopup_firstNameInput__dO3cj",submitButton:"TicketAndReceiptPopup_submitButton__djRu_",containerWrapper:"TicketAndReceiptPopup_containerWrapper__deBmW",cardContainer:"TicketAndReceiptPopup_cardContainer__UIju2",cardContainerHead:"TicketAndReceiptPopup_cardContainerHead__ATdwd",cardContent:"TicketAndReceiptPopup_cardContent__7E0qZ",cardHead:"TicketAndReceiptPopup_cardHead__P9n7P",cardItem:"TicketAndReceiptPopup_cardItem__bJDPm",inline:"TicketAndReceiptPopup_inline__E_7DM",viewLink:"TicketAndReceiptPopup_viewLink__Hzk1O",submitButtonContainer:"TicketAndReceiptPopup_submitButtonContainer__ahFUy"}},56550:function(e){e.exports={fareConditionSummaryPopupTableRow:"CompareFareTypesTable_fareConditionSummaryPopupTableRow__tTzUR",fareConditionSummaryPopupTableColumn:"CompareFareTypesTable_fareConditionSummaryPopupTableColumn__IPPMy",greyBackground:"CompareFareTypesTable_greyBackground__kwk2O",fareConditionItem:"CompareFareTypesTable_fareConditionItem__O0zGZ",fareConditionValue:"CompareFareTypesTable_fareConditionValue__eHDH6",divider:"CompareFareTypesTable_divider__7BwRU",fareTypeTableWrapper:"CompareFareTypesTable_fareTypeTableWrapper__9sxkb",fareConditionLabel:"CompareFareTypesTable_fareConditionLabel__Tb8Am",headColoumn:"CompareFareTypesTable_headColoumn__Xqmlu",dataColumn:"CompareFareTypesTable_dataColumn__P_oR6"}},94039:function(e){e.exports={link:"FareConditionSummaryContainer_link__4UovV",description:"FareConditionSummaryContainer_description__cjBN1",head:"FareConditionSummaryContainer_head__TaxjK",oneWay:"FareConditionSummaryContainer_oneWay__jO_AY",mtc:"FareConditionSummaryContainer_mtc__nODre",returnFlight:"FareConditionSummaryContainer_returnFlight___kX6z"}},74061:function(e){e.exports={baggage:"FareConditionIcon_baggage__cf1rk",cancellation:"FareConditionIcon_cancellation__qOWbb",bookingChange:"FareConditionIcon_bookingChange__sWO5Y",seatSelection:"FareConditionIcon_seatSelection__orEKh",earnKrisflyerMiles:"FareConditionIcon_earnKrisflyerMiles___PKWK",upgradeWithMiles:"FareConditionIcon_upgradeWithMiles__BPJvZ",noShow:"FareConditionIcon_noShow__Rz8ea",icon:"FareConditionIcon_icon__km4IL"}},56068:function(e){e.exports={label:"FareConditionLabel_label__ejvjT",mobileLabel:"FareConditionLabel_mobileLabel__mgBQi",labelText:"FareConditionLabel_labelText__UU3RQ"}},29006:function(e){e.exports={contentBorder:"FareConditionValue_contentBorder__UF6ko",fareConditionLabel:"FareConditionValue_fareConditionLabel__Y2WpG",fareConditionSummaryTableColumnFlex1:"FareConditionValue_fareConditionSummaryTableColumnFlex1__jVuEh",fareConditionSummaryTableColumnFlex2:"FareConditionValue_fareConditionSummaryTableColumnFlex2__5a6OT",normal:"FareConditionValue_normal__kDbkh",notAllowedText:"FareConditionValue_notAllowedText__Jbj7A",complementarySeatText:"FareConditionValue_complementarySeatText__cByNL"}},91989:function(e){e.exports={fareConditionSummaryTableColumnFlex1:"ColumnHead_fareConditionSummaryTableColumnFlex1__urlS5",fareConditionSummaryTableColumnFlex2:"ColumnHead_fareConditionSummaryTableColumnFlex2__grkiF",fareConditionSummaryTableColumnHead:"ColumnHead_fareConditionSummaryTableColumnHead__WJWts",fareFamilyTypeText:"ColumnHead_fareFamilyTypeText__l4yqn",cityNameText:"ColumnHead_cityNameText__gvKXI",fareFamilyEconomyLite:"ColumnHead_fareFamilyEconomyLite__441Tu",fareFamilyEconomyFlexi:"ColumnHead_fareFamilyEconomyFlexi__oU_JT",fareFamilyEconomyStandard:"ColumnHead_fareFamilyEconomyStandard__lOTF7",fareFamilyEconomySaver:"ColumnHead_fareFamilyEconomySaver__vbyLY",fareFamilyPremiumLite:"ColumnHead_fareFamilyPremiumLite__bzGyG",fareFamilyPremiumStandard:"ColumnHead_fareFamilyPremiumStandard__Uf30d",fareFamilyPremiumFlexi:"ColumnHead_fareFamilyPremiumFlexi__6z1aS",fareFamilyBusinessLite:"ColumnHead_fareFamilyBusinessLite__YNokK",fareFamilyBusinessStandard:"ColumnHead_fareFamilyBusinessStandard__Q_vYV",fareFamilyBusinessFlexi:"ColumnHead_fareFamilyBusinessFlexi__EQPzI",fareFamilyFirst:"ColumnHead_fareFamilyFirst__v7LVh"}},12285:function(e){e.exports={fareConditionItem:"FullFareCondition_fareConditionItem__6clGt",label:"FullFareCondition_label__qqeS3",value:"FullFareCondition_value___rNjD",wrapper:"FullFareCondition_wrapper__5r85H"}},7044:function(e){e.exports={head:"FullFareConditionContainer_head__tylUI",backButtonText:"FullFareConditionContainer_backButtonText__ONFjO",wrapper:"FullFareConditionContainer_wrapper__Mf77R",backButton:"FullFareConditionContainer_backButton__kb1t_",backArrowIcon:"FullFareConditionContainer_backArrowIcon__ogTOj"}},19226:function(e){e.exports={wrapper:"BookingReferenceAndTicketNo_wrapper__Bt74r",booking:"BookingReferenceAndTicketNo_booking__aMXMV",bookingIdentifierType:"BookingReferenceAndTicketNo_bookingIdentifierType__nSKmN",bookingIdentifier:"BookingReferenceAndTicketNo_bookingIdentifier__hBJ8F",cta:"BookingReferenceAndTicketNo_cta__ozzPi",divider:"BookingReferenceAndTicketNo_divider__OtVbO",ctaLink:"BookingReferenceAndTicketNo_ctaLink__Oek6h",ctaLinkDisabled:"BookingReferenceAndTicketNo_ctaLinkDisabled__EjJeT"}},62247:function(e){e.exports={mainHeading:"Heading_mainHeading__8dVrg",normalHeading:"Heading_normalHeading__f3d7f"}}}]);