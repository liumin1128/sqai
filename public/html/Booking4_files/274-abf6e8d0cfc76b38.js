"use strict";(self.webpackJsonpManageBooking=self.webpackJsonpManageBooking||[]).push([[274],{38274:function(i,e,o){o.d(e,{Ah:function(){return F},kp:function(){return C},tu:function(){return O}});var n=o(59499),l=o(35749),t=o(66577),d=o(1056);function s(i,e){var o=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.push.apply(o,n)}return o}function r(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){(0,n.Z)(i,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))}))}return i}var u,a=o.g,v="DD-MM-YYYY",f="YYYY-MM-DD HH:mm:ss",g="YYYY-MM-DD",c=function(i){var e=i.split(" ");return(0,d.d)(e[0]).format(v)},m=function(i){return!!i&&-1!=i.map((function(i){return i.key})).indexOf("STTR")},p=function(i){var e,o=null===i||void 0===i?void 0:i.toLowerCase().split(" ");if(o&&(null===o||void 0===o?void 0:o.length)>0)for(var n=0;n<(null===o||void 0===o?void 0:o.length);n++)o[n]=(e=o[n]).charAt(0).toUpperCase()+e.slice(1).toLowerCase();return null===o||void 0===o?void 0:o.join(" ")},h=function(i,e){var o=e;return"X"===i||"M"===i||"W"===i?o["ff.fareFamilyName.ORB1"]:"B"===i?o["ff.fareFamilyName.ORB2"]:"P"===i||"U"===i?o["ff.fareFamilyName.ORB4"]:"I"===i||"Z"===i||"G"===i?o["ff.fareFamilyName.ORB6"]:"D"===i?o["ff.fareFamilyName.ORB7"]:"O"===i?o["ff.fareFamilyName.ORB8"]:"A"===i?o["ff.fareFamilyName.ORB9"]:void 0},b=function(i,e){var o=e;return"X"===i||"M"===i?o["ff.fareFamilyName.ORB0"]:"P"===i?o["ff.fareFamilyName.ORB3"]:"I"===i?o["ff.fareFamilyName.ORB5"]:void 0},y=function(i){var e=i?i.length:0;return i&&"PRO"===i.substring(e-3)};!function(i){i.BASIC="K",i.ELITE_SILVER="ES",i.SILVER="S",i.ELITE_GOLD="EG",i.GOLD="G",i.QUALIFIED_PPS="Q",i.SOLITAIRE_PPS="T",i.SOLITAIRE_PPS_LIFE="L"}(u||(u={}));var C,F,O=function(i,e,o,n){var s,C,F,O,A,S,N,D,I,M,P,R,j,T,B,L,w,E,Q,x,G,Y,k,_,H,K,V,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},Z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i,J=e.commonProperties,X=[],z=[],W=[],q=[],$=[],ii=[],ei=[],oi=[],ni=[],li=[],ti=[],di=[],si=[],ri=c(null===(s=e.combinedFlights[0])||void 0===s||null===(C=s.segments[0])||void 0===C?void 0:C.origin.date),ui=e.combinedFlights.length,ai=null===o||void 0===o?void 0:o.tierCode,vi=null===o||void 0===o||null===(F=o.accountSummary)||void 0===F?void 0:F.eliteMiles,fi=null===o||void 0===o||null===(O=o.accountSummary)||void 0===O?void 0:O.goldMilesNeeded,gi=null===o||void 0===o||null===(A=o.accountSummary)||void 0===A?void 0:A.ppsValues,ci=null===o||void 0===o||null===(S=o.accountSummary)||void 0===S?void 0:S.ppsCumMiles,mi=[],pi=[],hi=[],bi=[],yi="",Ci=(0,d.d)().utc().format(f);"O"!==e.tripType?G=c(null===(K=e.combinedFlights[ui-1])||void 0===K||null===(V=K.segments[0])||void 0===V?void 0:V.origin.date):(G="NA",pi.push("NA"));var Fi,Oi,Ai,Si,Ni,Di,Ii="O"===e.tripType?"NA":d.a.duration((0,d.d)(G,v).diff((0,d.d)(ri,v))).asDays()+" days";"O"!==e.tripType&&"R"!==e.tripType||(X.push(null===(Fi=e.combinedFlights[0])||void 0===Fi?void 0:Fi.originAirportCode),z.push(null===(Oi=e.combinedFlights[0])||void 0===Oi?void 0:Oi.originCountryCode),W.push(null===(Ai=e.combinedFlights[0])||void 0===Ai?void 0:Ai.originCityName),q.push(null===(Si=e.combinedFlights[0])||void 0===Si?void 0:Si.destinationAirportCode),$.push(null===(Ni=e.combinedFlights[0])||void 0===Ni?void 0:Ni.destinationCountryCode),ii.push(null===(Di=e.combinedFlights[0])||void 0===Di?void 0:Di.destinationCityName));for(var Mi=0;Mi<e.combinedFlights.length;Mi++){var Pi,Ri,ji,Ti,Bi,Li;if("M"===e.tripType)X.push(null===(Pi=e.combinedFlights[Mi])||void 0===Pi?void 0:Pi.originAirportCode),z.push(null===(Ri=e.combinedFlights[Mi])||void 0===Ri?void 0:Ri.originCountryCode),W.push(null===(ji=e.combinedFlights[Mi])||void 0===ji?void 0:ji.originCityName),q.push(null===(Ti=e.combinedFlights[Mi])||void 0===Ti?void 0:Ti.destinationAirportCode),$.push(null===(Bi=e.combinedFlights[Mi])||void 0===Bi?void 0:Bi.destinationCountryCode),ii.push(null===(Li=e.combinedFlights[Mi])||void 0===Li?void 0:Li.destinationCityName);for(var wi=0;wi<(null===(Ei=e.combinedFlights[Mi])||void 0===Ei?void 0:Ei.segments.length);wi++){var Ei,Qi,xi,Gi,Yi,ki,_i,Hi,Ki,Vi,Ui,Zi,Ji,Xi,zi,Wi,qi,$i,ie,ee,oe,ne,le;if(0==Mi)mi.push(null===(Xi=e.combinedFlights[Mi])||void 0===Xi||null===(zi=Xi.segments[wi])||void 0===zi?void 0:zi.flightNumber.replace(" ",""));else if(Mi==ui-1){var te,de;pi.push(null===(te=e.combinedFlights[Mi])||void 0===te||null===(de=te.segments[wi])||void 0===de?void 0:de.flightNumber.replace(" ",""))}if(hi.push(p(null===(Qi=e.combinedFlights[Mi])||void 0===Qi||null===(xi=Qi.segments[wi])||void 0===xi?void 0:xi.cabinClass)),"ORB"!==e.bookingType){var se,re,ue,ae,ve,fe,ge,ce,me,pe;if(-1!=(0,t.f)(J["ff.fourFareFamily"]).indexOf(null!==(se=null===(re=e.combinedFlights[Mi])||void 0===re||null===(ue=re.segments[wi])||void 0===ue||null===(ae=ue.fareFamilyCode)||void 0===ae?void 0:ae.substring(0,4))&&void 0!==se?se:""))Q="ff.fareFamilyName."+(null===(ve=e.combinedFlights[Mi])||void 0===ve||null===(fe=ve.segments[wi])||void 0===fe||null===(ge=fe.fareFamilyCode)||void 0===ge?void 0:ge.substring(0,4));else Q="ff.fareFamilyName."+(null===(ce=e.combinedFlights[Mi])||void 0===ce||null===(me=ce.segments[wi])||void 0===me||null===(pe=me.fareFamilyCode)||void 0===pe?void 0:pe.substring(0,3));bi.push(J[Q])}else{var he,be,ye,Ce,Fe,Oe,Ae,Se,Ne,De,Ie,Me,Pe,Re,je,Te;if("SQ"===(null===(he=e.combinedFlights[Mi])||void 0===he||null===(be=he.segments[wi])||void 0===be?void 0:be.operatingAirlineCode))if(y(null===(ye=e.combinedFlights[Mi])||void 0===ye||null===(Ce=ye.segments[wi])||void 0===Ce?void 0:Ce.fareBasisCode))bi.push(b(null===(Fe=e.combinedFlights[Mi])||void 0===Fe||null===(Oe=Fe.segments[wi])||void 0===Oe?void 0:Oe.sellingClass,e.commonProperties));else bi.push(h(null===(Ae=e.combinedFlights[Mi])||void 0===Ae||null===(Se=Ae.segments[wi])||void 0===Se?void 0:Se.sellingClass,e.commonProperties));else if("Y"===(null===(Ne=e.combinedFlights[Mi])||void 0===Ne||null===(De=Ne.segments[wi])||void 0===De?void 0:De.cabinClassCode)&&"A"===(null===(Ie=e.combinedFlights[Mi])||void 0===Ie||null===(Me=Ie.segments[wi])||void 0===Me?void 0:Me.sellingClass))bi.push(J["ff.fareFamilyName.ORB1"]);else if("F"===(null===(Pe=e.combinedFlights[Mi])||void 0===Pe||null===(Re=Pe.segments[wi])||void 0===Re?void 0:Re.cabinClassCode)&&"A"===(null===(je=e.combinedFlights[Mi])||void 0===je||null===(Te=je.segments[wi])||void 0===Te?void 0:Te.sellingClass))bi.push(J["ff.fareFamilyName.ORB8"]);else{var Be,Le;bi.push(h(null===(Be=e.combinedFlights[Mi])||void 0===Be||null===(Le=Be.segments[wi])||void 0===Le?void 0:Le.sellingClass,e.commonProperties))}}if(ei.push(null===(Gi=e.combinedFlights[Mi])||void 0===Gi||null===(Yi=Gi.segments[wi])||void 0===Yi?void 0:Yi.operatingAirlineCode),oi.push(null===(ki=e.combinedFlights[Mi])||void 0===ki||null===(_i=ki.segments[wi])||void 0===_i?void 0:_i.flightNumber.replace(" ","")),li.push(null===(Hi=e.combinedFlights[Mi])||void 0===Hi||null===(Ki=Hi.segments[wi])||void 0===Ki?void 0:Ki.sellingClass),(null===(Vi=e.combinedFlights[Mi])||void 0===Vi||null===(Ui=Vi.segments[wi])||void 0===Ui?void 0:Ui.flightNumber)!==(null===(Zi=e.combinedFlights[Mi])||void 0===Zi||null===(Ji=Zi.segments[wi+1])||void 0===Ji?void 0:Ji.flightNumber))ni.push((null===(Wi=e.combinedFlights[Mi])||void 0===Wi||null===(qi=Wi.segments[wi])||void 0===qi?void 0:qi.origin.airportCode)+"-"+(null===($i=e.combinedFlights[Mi])||void 0===$i||null===(ie=$i.segments[wi])||void 0===ie?void 0:ie.destination.airportCode));else ni.push((null===(ee=e.combinedFlights[Mi])||void 0===ee||null===(oe=ee.segments[wi])||void 0===oe?void 0:oe.origin.airportCode)+"-"+(null===(ne=e.combinedFlights[Mi])||void 0===ne||null===(le=ne.segments[wi+1])||void 0===le?void 0:le.destination.airportCode)),wi++}}for(var we=0;we<e.flights.length;we++)if(-1===e.flights[we].segments.map((function(i){return i.segmentStatus})).indexOf("Completed")){var Ee,Qe,xe,Ge,Ye,ke,_e,He=null!==(Ee=null===(Qe=e.flights[we])||void 0===Qe?void 0:Qe.originTimeZone)&&void 0!==Ee?Ee:"",Ke=d.a.tz(null===(xe=e.flights[we])||void 0===xe||null===(Ge=xe.segments[0])||void 0===Ge?void 0:Ge.origin.date,He),Ve=(0,d.d)(Ke).utc().format(f),Ue=d.a.duration((0,d.d)(Ve).diff((0,d.d)(Ci)));_=Math.round(Ue.asHours()),H=(0,d.d)(Ve,g).diff((0,d.d)(Ci,g),"days"),Y=null===(Ye=e.flights[we])||void 0===Ye?void 0:Ye.destinationAirportCode,k=(0,d.d)(null===(ke=e.flights[we])||void 0===ke||null===(_e=ke.segments[0])||void 0===_e?void 0:_e.origin.date).format(v);for(var Ze=0;Ze<e.flights[we].segments.length;Ze++){var Je,Xe,ze,We,qe,$e,io,eo,oo,no,lo,to,so,ro;if(si.push(p(null===(Je=e.flights[we])||void 0===Je||null===(Xe=Je.segments[Ze])||void 0===Xe?void 0:Xe.cabinClass)),(null===(ze=e.flights[we])||void 0===ze||null===(We=ze.segments[Ze])||void 0===We?void 0:We.flightNumber)!==(null===(qe=e.flights[we])||void 0===qe||null===($e=qe.segments[Ze+1])||void 0===$e?void 0:$e.flightNumber))di.push((null===(io=e.flights[we])||void 0===io||null===(eo=io.segments[Ze])||void 0===eo?void 0:eo.origin.airportCode)+"-"+(null===(oo=e.flights[we])||void 0===oo||null===(no=oo.segments[Ze])||void 0===no?void 0:no.destination.airportCode));else di.push((null===(lo=e.flights[we])||void 0===lo||null===(to=lo.segments[Ze])||void 0===to?void 0:to.origin.airportCode)+"-"+(null===(so=e.flights[we])||void 0===so||null===(ro=so.segments[Ze+1])||void 0===ro?void 0:ro.destination.airportCode)),Ze++}break}m(e.specialKeyword)?yi="Commercial Student":"ORB"===e.bookingType?yi="Redemption":e.promoCode?yi="AAM":e.corporateDetails?yi="Commercial Corporate":"CIB"===e.bookingType&&(yi="Commercial");var uo,ao=bi.map((function(i){return void 0===i?"NA":i}));if(a.window.dataLayer){var vo=a.window.dataLayer.findIndex((function(i){return"virtualPageview"===i.event}));a.window.dataLayer.splice(vo,1)}null!==(N=e.productsAdded)&&void 0!==N&&N.baggage&&ti.push("Baggage"),null!==(D=e.productsAdded)&&void 0!==D&&D.seats&&ti.push("Seats"),null!==(I=e.productsAdded)&&void 0!==I&&I.meals&&ti.push("Meals"),null!==(M=e.productsAdded)&&void 0!==M&&M.insurance&&ti.push("Insurance"),null!==(P=e.productsAdded)&&void 0!==P&&P.hotel&&ti.push("Hotel"),null!==(R=e.productsAdded)&&void 0!==R&&R.car&&ti.push("Car"),function(i){i.SAA="SAA",i.SQDirect="SQ Direct",i.SQM="SQM",i.NDC="NDC",i.SQAPI="SQ API",i.GSA="GSA",i.ARO="ARO",i.HotelbedsOnline="Hotelbeds - Online",i.HotelbedsOffline="Hotelbeds - Offline",i.GDS="GDS",i.OAL="OAL"}(uo||(uo={}));var fo=null===(j=e.officeId)||void 0===j?void 0:j.substring(3,5);x="SQ"===fo||"MI"===fo?-1!==(0,t.f)(J["officeID.SAA"]).indexOf(e.officeId.substring(3))?uo.SAA:e.officeId.substring(5)===J["officeID.SQDirect"]?uo.SQDirect:-1!==(0,t.f)(J["officeID.SQM"]).indexOf(e.officeId.substring(3))?uo.SQM:-1!==(0,t.f)(J["officeID.NDC"]).indexOf(e.officeId.substring(3,8))&&-1===(0,t.f)(J["officeID.nonNDC"]).indexOf(e.officeId)?uo.NDC:-1!==(0,t.f)(J["officeID.SQAPI"]).indexOf(e.officeId.substring(3,8))?uo.SQAPI:-1!==(0,t.f)(J["officeID.GSA"]).indexOf(e.officeId.substring(3,8))?uo.GSA:uo.ARO:e.officeId.substring(3)===J["officeID.hotelBeds.online"]?uo.HotelbedsOnline:e.officeId.substring(3)===J["officeID.hotelBeds.offline"]?uo.HotelbedsOffline:-1!==(0,t.f)(J["officeID.creatorCompany"]).indexOf(fo)?uo.GDS:uo.OAL;var go=function(){if(!ai)return"NA";if(ai===u.BASIC){if(void 0!==vi)return 25e3-vi}else if(ai===u.SILVER||ai===u.ELITE_SILVER){if(void 0!==fi)return fi}else if(ai===u.GOLD||ai===u.ELITE_GOLD){if(void 0!==gi)return 25e3-gi}else{if(ai!==u.QUALIFIED_PPS)return"NA";if(void 0!==ci)return 5e4-ci}};a.window.formattedPageName=i,(0,l.y_)(r({event:"virtualPageview",formattedPageName:i,vitualPath:Z,origin:X.join("|"),"origin-country":z.join("|"),"origin-city":W.join("|"),destination:q.join("|"),"destination-country":$.join("|"),"destination-city":ii.join("|"),operatingAircraft:ei.join("|"),flightNumber:oi.join("|"),flightSegment:ni.join("|"),RBD:li.join("|"),departureDate:ri,returnDate:G,depYear:ri.split("-")[2],depMonth:ri.split("-")[1],depDay:ri.split("-")[0],retYear:G.split("-")[2]?G.split("-")[2]:"NA",retMonth:G.split("-")[1]?G.split("-")[1]:"NA",retDay:G.split("-")[0]?G.split("-")[0]:"NA",departureFlightNumber:mi.join("|"),returnFlightNumber:pi.join("|"),typeOfFare:yi,daysToDeparture:void 0!==H?String(H):"NA",hoursToDeparture:void 0!==_?String(_):"NA",numOfAdults:String(e.adultCount),numOfChildren:String(e.childCount),numOfInfants:String(e.infantCount),totalnoOfPax:String(e.adultCount+e.childCount+e.infantCount),typeOfTrip:"O"===e.tripType?"One-way":"R"===e.tripType?"Return":"M"===e.tripType?"Multicity":"",typeOfSearch:"MB",cabin:hi.join("|"),fareType:ao.join("|"),POSCountry:null===(T=e.combinedFlights[0])||void 0===T?void 0:T.originCountryCode,productsAdded:0===ti.length?"NA":ti.join("|"),StudentValidTillDate:e.studentValidTill?e.studentValidTill:"NA",travelDuration:Ii,upcomingFlightDate:null!==(B=k)&&void 0!==B?B:"NA",upcomingFlightDestination:null!==(L=Y)&&void 0!==L?L:"NA",upcomingFlightSegment:0!==di.length?di.join("|"):"NA",upcomingFlightCabin:0!==si.length?si.join("|"):"NA",bookingChannel:x,expiringKfMiles:void 0!=(null===o||void 0===o?void 0:o.expiryKfMiles)?String(o.expiryKfMiles):"NA",pointsToNextTier:String(go()),customerDOBMonth:null===n||void 0===n?void 0:n.customerDOBMonth,customerGender:null===n||void 0===n?void 0:n.customerGender,customerNationality:null===n||void 0===n?void 0:n.customerNationality,customerNumber:null===n||void 0===n?void 0:n.customerNumber,userStatus:null===n||void 0===n?void 0:n.userStatus,kfMiles:null===n||void 0===n?void 0:n.kfMiles,KfSpecialCustype:null===n||void 0===n?void 0:n.KfSpecialCustype,KfReasonForChange:null===n||void 0===n?void 0:n.KfReasonForChange,policyId:null!==(w=null===(E=e.flightDisruption.policyDetails)||void 0===E?void 0:E.policyID)&&void 0!==w?w:"NA"},U))};!function(i){i.na="NA",i.yes="Yes"}(C||(C={})),function(i){i.na="NA",i.success="Success",i.failure="Failure"}(F||(F={}))},66577:function(i,e,o){o.d(e,{Fd:function(){return t},f:function(){return n},hB:function(){return l}});var n=function(i){return i.split(",").map((function(i){return i.trim()}))},l=function(i,e,o,n){var l=o?o.split("_").join("-"):"en-UK";return void 0!=n?"".concat(i," ").concat(parseFloat(e.replace(/,/g,"")).toLocaleString(l,{minimumFractionDigits:n})):"".concat(i," ").concat(parseFloat(e.replace(/,/g,"")).toLocaleString(l))},t=function(i,e,o){var n=new Image;n.onload=e,n.onerror=o,n.src=i}}}]);